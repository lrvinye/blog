"use strict";(self.webpackChunklrvinye_blog=self.webpackChunklrvinye_blog||[]).push([[603],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=o.createContext({}),l=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=l(e.components);return o.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},p=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=l(t),m=r,f=p["".concat(c,".").concat(m)]||p[m]||d[m]||a;return t?o.createElement(f,s(s({ref:n},u),{},{components:t})):o.createElement(f,s({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,s=new Array(a);s[0]=p;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<a;l++)s[l]=t[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}p.displayName="MDXCreateElement"},4081:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return p}});var o=t(7462),r=t(3366),a=(t(7294),t(3905)),s=["components"],i={title:"\u901a\u8fc7 Helm \u90e8\u7f72 Etcd \u96c6\u7fa4",date:new Date("2021-04-04T15:01:07.000Z"),tags:["Helm","K8S","Etcd","Bitnami","\u5b89\u88c5","\u914d\u7f6e"],category:"\u8fd0\u7ef4"},c=void 0,l={unversionedId:"devops/deployEtcdByHelm",id:"devops/deployEtcdByHelm",isDocsHomePage:!1,title:"\u901a\u8fc7 Helm \u90e8\u7f72 Etcd \u96c6\u7fa4",description:"\u4e0b\u9762\u5c06\u4ecb\u7ecd\uff0c\u5728 K8S \u96c6\u7fa4\u4e2d\u901a\u8fc7 Bitnami \u7684 Helm Chart \u642d\u5efa\u90e8\u7f72\u4e00\u4e2a 3 \u8282\u70b9\u67b6\u6784\u7684 Etcd \u96c6\u7fa4",source:"@site/docs/devops/deployEtcdByHelm.md",sourceDirName:"devops",slug:"/devops/deployEtcdByHelm",permalink:"/blog/docs/devops/deployEtcdByHelm",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/devops/deployEtcdByHelm.md",version:"current",frontMatter:{title:"\u901a\u8fc7 Helm \u90e8\u7f72 Etcd \u96c6\u7fa4",date:"2021-04-04T15:01:07.000Z",tags:["Helm","K8S","Etcd","Bitnami","\u5b89\u88c5","\u914d\u7f6e"],category:"\u8fd0\u7ef4"},sidebar:"devops",previous:{title:"\u901a\u8fc7 Helm \u90e8\u7f72 Apisix",permalink:"/blog/docs/devops/deployApisixByHelm"},next:{title:"\u901a\u8fc7 Helm \u90e8\u7f72 Postgres \u96c6\u7fa4",permalink:"/blog/docs/devops/deployPostgresClusterByHelm"}},u=[{value:"\u51c6\u5907\u6301\u4e45\u5316",id:"\u51c6\u5907\u6301\u4e45\u5316",children:[]},{value:"\u51c6\u5907 Values.yaml",id:"\u51c6\u5907-valuesyaml",children:[{value:"<strong>\u5168\u5c40\u53c2\u6570</strong>",id:"\u5168\u5c40\u53c2\u6570",children:[]},{value:"<strong>\u6743\u9650\u8ba4\u8bc1\u8bbe\u7f6e</strong>",id:"\u6743\u9650\u8ba4\u8bc1\u8bbe\u7f6e",children:[]},{value:"<strong>\u6301\u4e45\u5316\u914d\u7f6e</strong>",id:"\u6301\u4e45\u5316\u914d\u7f6e",children:[]},{value:"\u521d\u59cb\u5316\u65f6\u76ee\u5f55\u6743\u9650\u914d\u7f6e",id:"\u521d\u59cb\u5316\u65f6\u76ee\u5f55\u6743\u9650\u914d\u7f6e",children:[]}]}],d={toc:u};function p(e){var n=e.components,t=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u4e0b\u9762\u5c06\u4ecb\u7ecd\uff0c\u5728 K8S \u96c6\u7fa4\u4e2d\u901a\u8fc7 Bitnami \u7684 Helm Chart \u642d\u5efa\u90e8\u7f72\u4e00\u4e2a 3 \u8282\u70b9\u67b6\u6784\u7684 Etcd \u96c6\u7fa4"),(0,a.kt)("h1",{id:"\u73af\u5883"},"\u73af\u5883"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u817e\u8baf\u4e91 kubernetes 1.18.4-tke.8"),(0,a.kt)("li",{parentName:"ul"},"Bitnami Etcd-6.1.3 ",(0,a.kt)("a",{parentName:"li",href:"https://charts.bitnami.com/bitnami/etcd-6.1.3.tgz"},"Chart \u4e0b\u8f7d"))),(0,a.kt)("h1",{id:"\u5177\u4f53\u6b65\u9aa4"},"\u5177\u4f53\u6b65\u9aa4"),(0,a.kt)("h2",{id:"\u51c6\u5907\u6301\u4e45\u5316"},"\u51c6\u5907\u6301\u4e45\u5316"),(0,a.kt)("p",null,"\u8fd9\u91cc\u4f7f\u7528\u817e\u8baf\u4e91\u7684\u4e91\u786c\u76d8\u4f5c\u4e3a\u6301\u4e45\u5316\u5377"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u624b\u52a8\u521b\u5efa \u6240\u9700\u7684\u4e91\u786c\u76d8\uff0c\u8fd9\u91cc\u6211\u4eec\u6709 3 \u4e2a\u8282\u70b9\uff0c\u9700\u8981 3 \u4e2a\u4e91\u786c\u76d8\uff0c\u6bcf\u4e2a 10GB"),(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e0e\u4e91\u786c\u76d8\u5bf9\u5e94\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"storageClass")," \u7531\u4e8e\u662f\u6570\u636e\u5e93\u6301\u4e45\u5316\u578b\u7684\u6570\u636e\uff0c\u6211\u4eec\u5e94\u8be5\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u6307\u5b9a\u56de\u6536\u7b56\u7565\u4e3a ",(0,a.kt)("inlineCode",{parentName:"li"},"Retain"),"\uff0c\u5377\u7ed1\u5b9a\u6a21\u5f0f\u5e94\u8be5\u8bbe\u7f6e\u4e3a",(0,a.kt)("inlineCode",{parentName:"li"},"\u7acb\u5373\u7ed1\u5b9a")),(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u6307\u5b9a",(0,a.kt)("inlineCode",{parentName:"li"},"storageClass"),"\u7684 PV \u5377 \u5e76\u5728\u63a7\u5236\u53f0\u4e2d\u4e0e\u4e0a\u4e00\u6b65\u521b\u5efa\u7684\u4e91\u786c\u76d8\u64cd\u4f5c\u8fdb\u884c\u7ed1\u5b9a"),(0,a.kt)("li",{parentName:"ol"},"PV \u9700\u8981\u6253\u4e0a labels")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"labels:\n  app: etcd-node\n")),(0,a.kt)("p",null,"\u8fd9\u91cc\u7684 label \u5c06\u5728\u4e0b\u9762\u7684\u6b65\u9aa4\u4e2d\u7528\u6765\u5bf9 PVC \u8fdb\u884c\u5339\u914d"),(0,a.kt)("h2",{id:"\u51c6\u5907-valuesyaml"},"\u51c6\u5907 Values.yaml"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u4e0b\u9762\u7684 Values \u914d\u7f6e\u4e2d\uff0c\u4ec5\u6307\u51fa\u9700\u8981\u6839\u636e",(0,a.kt)("a",{parentName:"p",href:"#Values%E5%8E%9F%E6%A8%A1%E6%9D%BF%E9%85%8D%E7%BD%AE"},"\u6a21\u677f"),"\u7684\u539f\u914d\u7f6e\u4fe1\u606f\u8fdb\u884c\u81ea\u5b9a\u4e49\u7684\u9009\u9879\uff01\uff01\uff01")),(0,a.kt)("h3",{id:"\u5168\u5c40\u53c2\u6570"},(0,a.kt)("strong",{parentName:"h3"},"\u5168\u5c40\u53c2\u6570")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6307\u5b9a ",(0,a.kt)("inlineCode",{parentName:"li"},"storageClass")," \u4e3a\u4e0a\u9762\u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u7684 SC")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"global:\n  storageClass: cbs-db-sc-test\n\n## Number of replicas\n##\nreplicaCount: 3\n\nresources:\n  limits:\n    cpu: 250m\n    memory: 512Mi\n  ##\n  requests:\n    cpu: 50m\n    memory: 128Mi\n\nnodeSelector:\n  #\u8fd9\u91cc\u662f\u7528\u6765\u7ea6\u675f\u8282\u70b9\u7684\u6240\u5728node\uff0c\u56e0\u4e3a\u817e\u8baf\u4e91\u7684\u4e91\u786c\u76d8\u53ea\u80fd\u6302\u8f7d\u540c\u4e00\u53ef\u7528\u533a\u4e0b\u7684CVM\n  topology.com.tencent.cloud.csi.cbs/zone: ap-guangzhou-4\n")),(0,a.kt)("h3",{id:"\u6743\u9650\u8ba4\u8bc1\u8bbe\u7f6e"},(0,a.kt)("strong",{parentName:"h3"},"\u6743\u9650\u8ba4\u8bc1\u8bbe\u7f6e")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff0c\u8fd9\u91cc\u8e29\u8fc7\u4e00\u4e2a\u5c0f\u5751\uff0c\u5982\u679c\u4f60\u4e4b\u524d\u4f7f\u7528\u540c\u4e00\u4e2a\u76d8\u4f5c\u6301\u4e45\u5316\uff0c\u90a3\u4e48\u8fd9\u91cc\u7684\u914d\u7f6e\u4f1a\u65e0\u6cd5\u751f\u6548\uff0c\u8fd8\u662f\u4e4b\u524d\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9519\u8bef\uff0c\u5177\u4f53\u53c2\u8003",(0,a.kt)("a",{parentName:"p",href:"https://github.com/bitnami/charts/issues/2433"},"\u8fd9\u91cc"))),(0,a.kt)("p",null,"\u8fd9\u91cc\u6211\u4eec\u7531\u4e8e\u662f\u96c6\u7fa4\u5185\u90e8\u4f7f\u7528\uff0c\u4e0d\u66b4\u9732\u51fa\u53bb\uff0c\u6240\u4ee5\u5173\u95ed\u8ba4\u8bc1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'auth:\n  ## Role-based access control parameters\n  ## ref: https://etcd.io/docs/current/op-guide/authentication/\n  ##\n  rbac:\n    ## \u8fd9\u91cc\u9700\u8981\u5173\u95ed\uff0c\u5426\u5219\u4f1a\u62a5\u9519 user name is empty\n    enabled: false\n    ## Allow to use etcd without configuring RBAC authentication\n    ##\n    allowNoneAuthentication: true\n    ## root user password. The root user is always `root`\n    ##\n    rootPassword: ""\n    ## Name of the existing secret containing credentials for the root user\n    ##\n    existingSecret: ""\n\n  ## TLS authentication for client-to-server communications\n  ## ref: https://etcd.io/docs/current/op-guide/security/\n  ##\n  client:\n    ## Switch to encrypt client-to-server communications using TLS\n    ##\n    secureTransport: false\n    ## Switch to automatically create the TLS certificates\n    ##\n    useAutoTLS: false\n    ## Name of the existing secret containing the TLS certificates for client-to-server communications\n    ##\n    existingSecret: ""\n    ## Switch to enable host authentication using TLS certificates. Requires existing secret\n    ##\n    enableAuthentication: false\n    ## Name of the file containing the client certificate\n    ##\n    certFilename: cert.pem\n    ## Name of the file containing the client certificate private key\n    ##\n    certKeyFilename: key.pem\n    ## Name of the file containing the client CA certificate\n    ## If not specified and `auth.client.enableAuthentication=true` or `auth.rbac.enabled=true`, the default is is `ca.crt`\n    ##\n    caFilename: ""\n\n  ## TLS authentication for server-to-server communications\n  ## ref: https://etcd.io/docs/current/op-guide/security/\n  ##\n  peer:\n    ## Switch to encrypt server-to-server communications using TLS\n    ##\n    secureTransport: false\n    ## Switch to automatically create the TLS certificates\n    ##\n    useAutoTLS: false\n    ## Name of the existing secret containing the TLS certificates for server-to-server communications\n    ##\n    existingSecret: ""\n    ## Switch to enable host authentication using TLS certificates. Requires existing secret\n    ##\n    enableAuthentication: false\n    ## Name of the file containing the peer certificate\n    ##\n    certFilename: cert.pem\n    ## Name of the file containing the peer certificate private key\n    ##\n    certKeyFilename: key.pem\n    ## Name of the file containing the peer CA certificate\n    ## If not specified and `auth.peer.enableAuthentication=true` or `rbac.enabled=true`, the default is is `ca.crt`\n    ##\n    caFilename: ""\n')),(0,a.kt)("h3",{id:"\u6301\u4e45\u5316\u914d\u7f6e"},(0,a.kt)("strong",{parentName:"h3"},"\u6301\u4e45\u5316\u914d\u7f6e")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"## \u6301\u4e45\u5316\npersistence:\n  enabled: true\n  selector:\n    matchLabels:\n      app: etcd-node\n  accessModes:\n    - ReadWriteOnce\n    ## \u817e\u8baf\u4e91\u4e91\u786c\u76d8\u6700\u4f4e10G\uff0c\u4e14\u5fc5\u987b\u662f10\u7684\u500d\u6570\n  size: 10Gi\n")),(0,a.kt)("h3",{id:"\u521d\u59cb\u5316\u65f6\u76ee\u5f55\u6743\u9650\u914d\u7f6e"},"\u521d\u59cb\u5316\u65f6\u76ee\u5f55\u6743\u9650\u914d\u7f6e"),(0,a.kt)("p",null,"\u4e3a\u4e86\u9632\u6b62\u6743\u9650\u4e0d\u8db3",(0,a.kt)("inlineCode",{parentName:"p"},"Permission deny")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"volumePermissions:\n  enabled: true\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Chart \u51c6\u5907\u5b8c\u6bd5\u5373\u53ef\u8fdb\u884c\u90e8\u7f72"),(0,a.kt)("h1",{id:"values-\u539f\u6a21\u677f\u914d\u7f6e"},"Values \u539f\u6a21\u677f\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'## Global Docker image parameters\n## Please, note that this will override the image parameters, including dependencies, configured to use the global value\n## Current available global Docker image parameters: imageRegistry and imagePullSecrets\n##\n# global:\n#   imageRegistry: myRegistryName\n#   imagePullSecrets:\n#     - myRegistryKeySecretName\n#   storageClass: myStorageClass\n\n## Bitnami etcd image version\n## ref: https://hub.docker.com/r/bitnami/etcd/tags/\n##\nimage:\n  registry: docker.io\n  repository: bitnami/etcd\n  tag: 3.4.15-debian-10-r14\n  ## Specify a imagePullPolicy\n  ## Defaults to \'Always\' if image tag is \'latest\', else set to \'IfNotPresent\'\n  ## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images\n  ##\n  pullPolicy: IfNotPresent\n  ## Optionally specify an array of imagePullSecrets.\n  ## Secrets must be manually created in the namespace.\n  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/\n  ## e.g:\n  ## pullSecrets:\n  ##   - myRegistryKeySecretName\n  ##\n  pullSecrets: []\n  ## Set to true if you would like to see extra information on logs\n  ##\n  debug: false\n\n## String to partially override common.names.fullname template (will maintain the release name)\n##\n# nameOverride:\n\n## String to fully override common.names.fullname template\n##\n# fullnameOverride:\n\n## Add labels to all the deployed resources\n##\ncommonLabels: {}\n\n## Add annotations to all the deployed resources\n##\ncommonAnnotations: {}\n\n## Force target Kubernetes version (using Helm capabilities if not set)\n##\nkubeVersion: ""\n\n## Kubernetes Cluster Domain\n##\nclusterDomain: cluster.local\n\n## Extra objects to deploy (value evaluated as a template)\n##\nextraDeploy: []\n\n## Auto compaction mode, by default periodic. Valid values: \u2018periodic\u2019, \u2018revision\u2019.\n## - \'periodic\' for duration based retention, defaulting to hours if no time unit is provided (e.g. \u20185m\u2019).\n## - \'revision\' for revision number based retention.\n##\n# autoCompactionMode: periodic\n\n## Auto compaction retention for mvcc key value store in hour, by default 0, means disabled\n##\n# autoCompactionRetention: 0\n\n## Authentication parameters\n##\nauth:\n  ## Role-based access control parameters\n  ## ref: https://etcd.io/docs/current/op-guide/authentication/\n  ##\n  rbac:\n    enabled: true\n    ## Allow to use etcd without configuring RBAC authentication\n    ##\n    allowNoneAuthentication: true\n    ## root user password. The root user is always `root`\n    ##\n    rootPassword: ""\n    ## Name of the existing secret containing credentials for the root user\n    ##\n    existingSecret: ""\n\n  ## TLS authentication for client-to-server communications\n  ## ref: https://etcd.io/docs/current/op-guide/security/\n  ##\n  client:\n    ## Switch to encrypt client-to-server communications using TLS\n    ##\n    secureTransport: false\n    ## Switch to automatically create the TLS certificates\n    ##\n    useAutoTLS: false\n    ## Name of the existing secret containing the TLS certificates for client-to-server communications\n    ##\n    existingSecret: ""\n    ## Switch to enable host authentication using TLS certificates. Requires existing secret\n    ##\n    enableAuthentication: false\n    ## Name of the file containing the client certificate\n    ##\n    certFilename: cert.pem\n    ## Name of the file containing the client certificate private key\n    ##\n    certKeyFilename: key.pem\n    ## Name of the file containing the client CA certificate\n    ## If not specified and `auth.client.enableAuthentication=true` or `auth.rbac.enabled=true`, the default is is `ca.crt`\n    ##\n    caFilename: ""\n\n  ## TLS authentication for server-to-server communications\n  ## ref: https://etcd.io/docs/current/op-guide/security/\n  ##\n  peer:\n    ## Switch to encrypt server-to-server communications using TLS\n    ##\n    secureTransport: false\n    ## Switch to automatically create the TLS certificates\n    ##\n    useAutoTLS: false\n    ## Name of the existing secret containing the TLS certificates for server-to-server communications\n    ##\n    existingSecret: ""\n    ## Switch to enable host authentication using TLS certificates. Requires existing secret\n    ##\n    enableAuthentication: false\n    ## Name of the file containing the peer certificate\n    ##\n    certFilename: cert.pem\n    ## Name of the file containing the peer certificate private key\n    ##\n    certKeyFilename: key.pem\n    ## Name of the file containing the peer CA certificate\n    ## If not specified and `auth.peer.enableAuthentication=true` or `rbac.enabled=true`, the default is is `ca.crt`\n    ##\n    caFilename: ""\n\n## Initial cluster state. Allowed values: \'new\' or \'existing\'\n## If this values is not set, the default values below are set:\n## - \'new\': when installing the chart (\'helm install ...\')\n## - \'existing\': when upgrading the chart (\'helm upgrade ...\')\n##\ninitialClusterState: ""\n\n## Limits the number of operating system threads that can execute user-level\n## Go code simultaneously by setting GOMAXPROCS environment variable\n## ref: https://golang.org/pkg/runtime\n##\n# maxProcs:\n\n## Use a PreStop hook to remove the etcd members from the etcd cluster\n## they the containers are terminated\n## NOTE: Ignored if lifecycleHooks is set or replicaCount=1\n##\nremoveMemberOnContainerTermination: true\n\n## etcd configuration\n## Specify content for etcd.conf.yml\n## e.g:\n## configuration: |-\n##    foo: bar\n##    baz:\n##\n# configuration:\n\n## Existing ConfigMap with etcd configuration\n## NOTE: When it\'s set the configuration parameter is ignored\n##\n# existingConfigmap:\n\n## An array to add extra env vars\n## e.g:\n## extraEnvVars:\n##   - name: FOO\n##     value: "bar"\n##\nextraEnvVars: []\n\n## ConfigMap with extra environment variables\n##\nextraEnvVarsCM: ""\n\n## Secret with extra environment variables\n##\nextraEnvVarsSecret: ""\n\n## Command and args for running the container (set to default if not set). Use array form\n##\ncommand: []\nargs: []\n\n## Number of replicas\n##\nreplicaCount: 1\n\n## Update strategy\n## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies\n##\nupdateStrategy:\n  ## Update strategy type, can be set to RollingUpdate or OnDelete.\n  ##\n  type: RollingUpdate\n\n## Pod management policy\n## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-management-policies\n##\npodManagementPolicy: Parallel\n\n## etcd pod host aliases\n## ref: https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/\n##\nhostAliases: []\n\n## Override default etcd container hooks\n##\nlifecycleHooks: {}\n\n## etcd container ports to open\n##\ncontainerPorts:\n  client: 2379\n  peer: 2380\n\n## etcd containers\' SecurityContext\n## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod\n##\npodSecurityContext:\n  enabled: true\n  fsGroup: 1001\n\n## etcd pods\' Security Context\n## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container\n##\ncontainerSecurityContext:\n  enabled: true\n  runAsUser: 1001\n  runAsNonRoot: true\n\n## etcd containers\' resource requests and limits\n## ref: http://kubernetes.io/docs/user-guide/compute-resources/\n##\nresources:\n  ## We usually recommend not to specify default resources and to leave this as a conscious\n  ## choice for the user. This also increases chances charts run on environments with little\n  ## resources, such as Minikube. If you do want to specify resources, uncomment the following\n  ## lines, adjust them as necessary, and remove the curly braces after \'resources:\'.\n  ## e.g:\n  ## limits:\n  ##   cpu: 500m\n  ##   memory: 1Gi\n  ##\n  limits: {}\n  requests: {}\n\n## Configure extra options for liveness, readiness and startup probes\n## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes\n##\nlivenessProbe:\n  enabled: true\n  initialDelaySeconds: 60\n  periodSeconds: 30\n  timeoutSeconds: 5\n  successThreshold: 1\n  failureThreshold: 5\nreadinessProbe:\n  enabled: true\n  initialDelaySeconds: 60\n  periodSeconds: 10\n  timeoutSeconds: 5\n  successThreshold: 1\n  failureThreshold: 5\nstartupProbe:\n  enabled: false\n  initialDelaySeconds: 0\n  periodSeconds: 10\n  timeoutSeconds: 5\n  successThreshold: 1\n  failureThreshold: 60\n\n## Custom Liveness probes for etcd\n##\ncustomLivenessProbe: {}\n\n## Custom Readiness probes for etcd\n##\ncustomReadinessProbe: {}\n\n## Custom Startup probe for etcd\n##\ncustomStartupProbe: {}\n\n## Extra volumes to add to the etcd statefulset\n##\nextraVolumes: []\n\n## Extra volume mounts to add to etcd containers\n##\nextraVolumeMounts: []\n\n## Add init containers to the etcd pods.\n## e.g:\n## initContainers:\n##   - name: your-image-name\n##     image: your-image\n##     imagePullPolicy: Always\n##     ports:\n##       - name: portname\n##         containerPort: 1234\n##\ninitContainers: {}\n\n## Add sidecars to the etcd pods.\n## e.g:\n## sidecars:\n##   - name: your-image-name\n##     image: your-image\n##     imagePullPolicy: Always\n##     ports:\n##       - name: portname\n##         containerPort: 1234\n##\nsidecars: {}\n\n## Pod annotations\n## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/\n##\npodAnnotations: {}\n\n## Pod labels\n## Ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/\n##\npodLabels: {}\n\n## Pod affinity preset\n## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity\n## Allowed values: soft, hard\n##\npodAffinityPreset: ""\n\n## Pod anti-affinity preset\n## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity\n## Allowed values: soft, hard\n##\npodAntiAffinityPreset: soft\n\n## Node affinity preset\n## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity\n## Allowed values: soft, hard\n##\nnodeAffinityPreset:\n  ## Node affinity type\n  ## Allowed values: soft, hard\n  ##\n  type: ""\n  ## Node label key to match\n  ## e.g:\n  ## key: "kubernetes.io/e2e-az-name"\n  ##\n  key: ""\n  ## Node label values to match\n  ## e.g:\n  ## values:\n  ##   - e2e-az1\n  ##   - e2e-az2\n  ##\n  values: []\n\n## Affinity for pod assignment\n## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity\n## Note: podAffinityPreset, podAntiAffinityPreset, and nodeAffinityPreset will be ignored when it\'s set\n##\naffinity: {}\n\n## Node labels for pod assignment\n## Ref: https://kubernetes.io/docs/user-guide/node-selection/\n##\nnodeSelector: {}\n\n## Tolerations for pod assignment\n## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\n##\ntolerations: []\n\n## Name of the priority class to be used by etcd pods, priority class needs to be created beforehand\n## Ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/\n##\npriorityClassName: ""\n\n## etcd Pod Disruption Budget configuration\n## ref: https://kubernetes.io/docs/tasks/run-application/configure-pdb/\n##\npdb:\n  create: false\n  ## Min number of pods that must still be available after the eviction\n  ##\n  minAvailable: 1\n  ## Max number of pods that can be unavailable after the eviction\n  ##\n  # maxUnavailable: 1\n\n## Service parameters\n##\nservice:\n  ## K8s service type\n  ##\n  type: ClusterIP\n  ## etcd client port\n  ##\n  port: 2379\n  ## etcd client port name override\n  ##\n  clientPortNameOverride: ""\n  ## etcd peer port\n  ##\n  peerPort: 2380\n  ## etcd peer port name override\n  ##\n  peerPortNameOverride: ""\n  ## Specify the nodePort(s) value(s) for the LoadBalancer and NodePort service types.\n  ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport\n  ##\n  nodePorts:\n    clientPort: ""\n    peerPort: ""\n  ## loadBalancerIP for the etcd service (optional, cloud specific)\n  ## ref: http://kubernetes.io/docs/user-guide/services/#type-loadbalancer\n  ##\n  loadBalancerIP: ""\n  ## Load Balancer sources\n  ## ref: https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service\n  ## e.g:\n  ## loadBalancerSourceRanges:\n  ##   - 10.10.10.0/24\n  ##\n  loadBalancerSourceRanges: []\n  ## External IPs\n  ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#external-ips\n  ##\n  externalIPs: []\n  ## Provide any additional annotations which may be required (evaluated as a template)\n  ##\n  annotations: {}\n\n## Enable persistence using Persistent Volume Claims\n## ref: http://kubernetes.io/docs/user-guide/persistent-volumes/\n##\npersistence:\n  ## If true, use a Persistent Volume Claim. If false, use emptyDir.\n  ##\n  enabled: true\n  ## Persistent Volume Storage Class\n  ## If defined, storageClassName: <storageClass>\n  ## If set to "-", storageClassName: "", which disables dynamic provisioning\n  ## If undefined (the default) or set to null, no storageClassName spec is\n  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on\n  ##   GKE, AWS & OpenStack)\n  ##\n  # storageClass: "-"\n  ## Persistent Volume Claim annotations (evaluated as a template)\n  ##\n  annotations: {}\n  ## Persistent Volume Access Modes\n  ##\n  accessModes:\n    - ReadWriteOnce\n  ## Persistent Volume size\n  ##\n  size: 8Gi\n  ## Provide any additional label selector to further filter the set of volumes (evaluated as a template)\n  ## ref: https://kubernetes.io/docs/concepts/storage/persistent-volumes/#selector\n  ##\n  selector: {}\n\n## Init containers parameters:\n## volumePermissions: Change the owner and group of the persistent volume mountpoint to runAsUser:fsGroup values from the securityContext section.\n##\nvolumePermissions:\n  enabled: false\n  image:\n    registry: docker.io\n    repository: bitnami/bitnami-shell\n    tag: "10"\n    pullPolicy: Always\n    ## Optionally specify an array of imagePullSecrets.\n    ## Secrets must be manually created in the namespace.\n    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/\n    ## e.g:\n    ## pullSecrets:\n    ##   - myRegistryKeySecretName\n    ##\n    pullSecrets: []\n\n  ## Init container\' resource requests and limits\n  ## ref: http://kubernetes.io/docs/user-guide/compute-resources/\n  ##\n  resources:\n    ## We usually recommend not to specify default resources and to leave this as a conscious\n    ## choice for the user. This also increases chances charts run on environments with little\n    ## resources, such as Minikube. If you do want to specify resources, uncomment the following\n    ## lines, adjust them as necessary, and remove the curly braces after \'resources:\'.\n    ## e.g:\n    ## limits:\n    ##   cpu: 500m\n    ##   memory: 1Gi\n    ##\n    limits: {}\n    requests: {}\n\n## etcd metrics configuration\n##\nmetrics:\n  enabled: false\n  ## Annotations for the Prometheus metrics on etcd pods\n  ##\n  podAnnotations:\n    prometheus.io/scrape: "true"\n    prometheus.io/port: "2379"\n\n  ## Prometheus Service Monitor\n  ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint\n  ##\n  podMonitor:\n    ## If the Prometheus Operator is installed in your cluster, set to true to create a PodMonitor entry\n    ##\n    enabled: false\n    ## Namespace in which Prometheus is running\n    ##\n    # namespace: monitoring\n    ## Specify the interval at which metrics should be scraped\n    ##\n    interval: 30s\n    ## Specify the timeout after which the scrape is ended\n    ##\n    # scrapeTimeout: 30s\n    ## Used to pass Labels that are used by the Prometheus installed in your cluster to select PodMonitors to work with\n    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#prometheusspec\n    ##\n    additionalLabels: {}\n    ## Scheme to use for scraping.\n    ##\n    scheme: http\n    ## TLS configuration for the endpoints to be scraped.\n    ## ref: https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#tlsconfig\n    ## e.g:\n    ## tlsConfig:\n    ##   ca:\n    ##     secret:\n    ##       name: existingSecretName\n    ##\n    tlsConfig: {}\n\n## Start a new etcd cluster recovering the data from an existing snapshot\n## before bootstrapping\n##\nstartFromSnapshot:\n  enabled: false\n  ## Existing PVC containing the etcd snapshot\n  ##\n  existingClaim: ""\n  ## Snapshot filename\n  ##\n  snapshotFilename: ""\n\n## Enable auto disaster recovery by periodically snapshotting the keyspace:\n## - It creates a cronjob to periodically snapshotting the keyspace\n## - It also creates a ReadWriteMany PVC to store the snapshots\n## If the cluster permanently loses more than (N-1)/2 members, it tries to\n## recover itself from the last available snapshot.\n##\ndisasterRecovery:\n  enabled: false\n  cronjob:\n    ## Schedule in Cron format to save snapshots\n    ## See https://en.wikipedia.org/wiki/Cron\n    ##\n    schedule: "*/30 * * * *"\n    ## Number of successful finished jobs to retain\n    ##\n    historyLimit: 1\n    ## Number of etcd snapshots to retain, tagged with date\n    ##\n    snapshotHistoryLimit: 1\n    ## Pod annotations\n    ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/\n    ##\n    podAnnotations: {}\n    ## Configure resource requests and limits for snapshotter containers\n    ## ref: http://kubernetes.io/docs/user-guide/compute-resources/\n    ##\n    resources:\n      ## We usually recommend not to specify default resources and to leave this as a conscious\n      ## choice for the user. This also increases chances charts run on environments with little\n      ## resources, such as Minikube. If you do want to specify resources, uncomment the following\n      ## lines, adjust them as necessary, and remove the curly braces after \'resources:\'.\n      ## e.g:\n      ## limits:\n      ##   cpu: 500m\n      ##   memory: 1Gi\n      ##\n      limits: {}\n      requests: {}\n  pvc:\n    ## A manually managed Persistent Volume and Claim\n    ## If defined, PVC must be created manually before volume will be bound\n    ## The value is evaluated as a template, so, for example, the name can depend on .Release or .Chart\n    ##\n    # existingClaim:\n\n    ## PVC Storage Request\n    ##\n    size: 2Gi\n    ## storageClassName, choose a storageClassName with ReadWriteMany support\n    ##\n    storageClassName: nfs\n')))}p.isMDXComponent=!0}}]);