"use strict";(self.webpackChunklrvinye_blog=self.webpackChunklrvinye_blog||[]).push([[60],{3905:function(e,n,r){r.d(n,{Zo:function(){return p},kt:function(){return m}});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=t.createContext({}),u=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):c(c({},n),e)),r},p=function(e){var n=u(e.components);return t.createElement(s.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(r),m=a,k=d["".concat(s,".").concat(m)]||d[m]||i[m]||o;return r?t.createElement(k,c(c({ref:n},p),{},{components:r})):t.createElement(k,c({ref:n},p))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,c=new Array(o);c[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var u=2;u<o;u++)c[u]=r[u];return t.createElement.apply(null,c)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1022:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var t=r(7462),a=r(3366),o=(r(7294),r(3905)),c=["components"],l={title:"\u547d\u4ee4\u901f\u67e5",date:new Date("2020-05-29T23:13:35.000Z"),updated:new Date("2021-04-15T17:22:00.000Z"),category:"\u8fd0\u7ef4",tags:["\u8fd0\u7ef4","\u5b89\u88c5","\u914d\u7f6e"]},s="Docker \u547d\u4ee4",u={unversionedId:"devops/commandQuickReference",id:"devops/commandQuickReference",isDocsHomePage:!1,title:"\u547d\u4ee4\u901f\u67e5",description:"\u8fdb\u5165\u5bb9\u5668",source:"@site/docs/devops/commandQuickReference.md",sourceDirName:"devops",slug:"/devops/commandQuickReference",permalink:"/docs/devops/commandQuickReference",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/devops/commandQuickReference.md",version:"current",frontMatter:{title:"\u547d\u4ee4\u901f\u67e5",date:"2020-05-29T23:13:35.000Z",updated:"2021-04-15T17:22:00.000Z",category:"\u8fd0\u7ef4",tags:["\u8fd0\u7ef4","\u5b89\u88c5","\u914d\u7f6e"]},sidebar:"devops",previous:{title:"\u5728K8S\u4e0a\u90e8\u7f72RabbitMQ\u96c6\u7fa4",permalink:"/docs/devops/buildRabbitMQOnk8s"},next:{title:"\u901a\u8fc7 Helm \u90e8\u7f72 Apisix",permalink:"/docs/devops/deployApisixByHelm"}},p=[{value:"\u90e8\u7f72\u63a8\u9001",id:"\u90e8\u7f72\u63a8\u9001",children:[]},{value:"nexus/\u670d\u52a1\u5668 Maven",id:"nexus\u670d\u52a1\u5668-maven",children:[]},{value:"nginx",id:"nginx",children:[]},{value:"nacos",id:"nacos",children:[]},{value:"Redis",id:"redis",children:[{value:"\u5f3a\u5236\u9500\u6bc1 pod",id:"\u5f3a\u5236\u9500\u6bc1-pod",children:[]}]},{value:"url \u4e0b\u8f7d\u6587\u4ef6",id:"url-\u4e0b\u8f7d\u6587\u4ef6",children:[]}],i={toc:p};function d(e){var n=e.components,r=(0,a.Z)(e,c);return(0,o.kt)("wrapper",(0,t.Z)({},i,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"docker-\u547d\u4ee4"},"Docker \u547d\u4ee4"),(0,o.kt)("p",null,"\u8fdb\u5165\u5bb9\u5668"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker exec -i -t  mynginx /bin/bash\n")),(0,o.kt)("h2",{id:"\u90e8\u7f72\u63a8\u9001"},"\u90e8\u7f72\u63a8\u9001"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u767b\u5f55\u4ed3\u5e93")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker login -u \u7528\u6237\u540d -p \u5bc6\u7801  [SERVER]\nex:\nsudo docker login --username=100012787985 ccr.ccs.tencentyun.com\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u955c\u50cf\u6253\u6807\u8bb0")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo docker tag [ImageId] ccr.ccs.tencentyun.com/cherryez/nginx:[tag]\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4e0a\u4f20\u955c\u50cf\u81f3\u4ed3\u5e93")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker push myapache:v1\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u901a\u8fc7 Dockerfile \u6784\u5efa\u955c\u50cf\u5e76\u63a8\u9001")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker build -t \u955c\u50cf\u6807\u7b7e -f \u6307\u5b9a\u8981\u4f7f\u7528\u7684Dockerfile\u8def\u5f84\nex:\ndocker build -t huwanyang168/demo:0.0.1 -f Dockerfile .\ndocker push huwanyang168/demo:0.0.1\n")),(0,o.kt)("h2",{id:"nexus\u670d\u52a1\u5668-maven"},"nexus/\u670d\u52a1\u5668 Maven"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -d -p 8081:8081 -p 5000:5000 --name nexus -v /home/nexus/nexus-data:/nexus-data --restart=always sonatype/nexus3\n")),(0,o.kt)("p",null,"5000 \u7aef\u53e3\u662f\u7528\u4e8e\u955c\u50cf\u4ed3\u5e93\u7684\u670d\u52a1\u7aef\u53e3 8081 \u7aef\u53e3\u662f nexus \u7684\u670d\u52a1\u7aef\u53e3"),(0,o.kt)("p",null,"/nexus-data \u6570\u636e\u6302\u8f7d"),(0,o.kt)("h2",{id:"nginx"},"nginx"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run --rm --name nginx -p 80:80 -p 443:443 -v /home/nginx/html:/usr/share/nginx/html -v /home/nginx/ssl:/etc/nginx/ssl -v /home/nginx/conf/dnginx-gz-app.conf:/etc/nginx/nginx.conf -v /home/nginx/logs:/var/log/nginx -d nginx:alpine\n")),(0,o.kt)("h2",{id:"nacos"},"nacos"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u5355\u673a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -d -e MODE=standalone -e SPRING_DATASOURCE_PLATFORM=mysql -e MYSQL_SERVICE_HOST=172.16.0.13 -e MYSQL_SERVICE_PORT=3306 -e MYSQL_SERVICE_USER=nacos -e MYSQL_SERVICE_PASSWORD=nacos2020# -e MYSQL_SERVICE_DB_NAME=nacos -p 9843:8848 --restart=on-failure --name nacos9843 nacos/nacos-server\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u96c6\u7fa4")," --\u6682\u65f6\u6d4b\u8bd5\u7ed3\u679c\u4e0d\u53ef\u7528"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run --name nacos9843 --restart=on-failure -d -e MYSQL_MASTER_SERVICE_HOST=172.16.0.13 -e MYSQL_MASTER_SERVICE_PORT=3306 -e MYSQL_MASTER_SERVICE_DB_NAME=nacos -e MYSQL_MASTER_SERVICE_USER=nacos -e MYSQL_MASTER_SERVICE_PASSWORD=nacos2020# -e SPRING_DATASOURCE_PLATFORM=mysql -e MYSQL_DATABASE_NUM=1 -e NACOS_SERVERS=172.16.0.14:9841,172.16.0.14:9842,172.16.0.14:9843 -e JVM_XMS=512m -e JVM_XMX=512m -e JVM_XMN=256m -e JVM_MS=32m -e JVM_MMS=80m -p 9843:8848 nacos/nacos-server\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'nacos-0.nacos.cherryez.svc.cluster.local.:8848\nnacos-1.nacos.cherryez.svc.cluster.local.:8848\nnacos-2.nacos.cherryez.svc.cluster.local.:8848"\n')),(0,o.kt)("h2",{id:"redis"},"Redis"),(0,o.kt)("p",null,"\u542f\u52a8\u5e76\u8bbe\u7f6e\u5bc6\u7801"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'docker run -d --name redis -p 6379:6379 redis --requirepass "mypassword"\n')),(0,o.kt)("h1",{id:"k8s"},"K8S"),(0,o.kt)("p",null,"\u96c6\u7fa4\u4e2d\u8bbf\u95ee\u4efb\u610f\u547d\u540d\u7a7a\u95f4\u4e0b\u7684 service\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"${\u670d\u52a1\u540d}.${\u547d\u540d\u7a7a\u95f4}.svc.cluster.local\n")),(0,o.kt)("h3",{id:"\u5f3a\u5236\u9500\u6bc1-pod"},"\u5f3a\u5236\u9500\u6bc1 pod"),(0,o.kt)("p",null,"\u767b\u5f55\u4efb\u610f TKE \u5de5\u4f5c\u8282\u70b9\uff0c\u5c1d\u8bd5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5220\u9664\u5f02\u5e38 pod\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get pod -n \u547d\u540d\u7a7a\u95f4 |grep pod\u540d  ##\u67e5\u770b\u662f\u5426\u5b58\u5728 Terminating \u72b6\u6001\u7684pod\n\nkubectl delete pod pod\u540d -n \u547d\u540d\u7a7a\u95f4 --force --grace-period=0  ##\u4f7f\u7528\u547d\u4ee4\u5f3a\u5236\u5220\u9664Terminating \u72b6\u6001\u7684pod\n")),(0,o.kt)("p",null,"Statefulset headless \u7684 dns \u57df\u540d"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"\u201ccluster.local\u201d\u6307\u7684\u662f\u96c6\u7fa4\u7684\u57df\u540d \u6309\u539f\u6837\u5373\u53ef\n$(podname).(headless server name)\nFQDN\uff1a $(podname).(headless server name).namespace.svc.cluster.local\n")),(0,o.kt)("h1",{id:"wget-\u547d\u4ee4"},"wget \u547d\u4ee4"),(0,o.kt)("h2",{id:"url-\u4e0b\u8f7d\u6587\u4ef6"},"url \u4e0b\u8f7d\u6587\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wget\n--user=\u7528\u6237\u540d --ask-password -P \u6307\u5b9a\u76ee\u5f55 url\n")))}d.isMDXComponent=!0}}]);